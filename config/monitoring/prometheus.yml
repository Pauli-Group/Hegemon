# Prometheus configuration for Hegemon Testnet
#
# This configuration scrapes metrics from:
# - Hegemon nodes (Substrate metrics at :9615)
# - Node exporter (system metrics)
#
# Access at: http://localhost:9090

global:
  scrape_interval: 15s
  evaluation_interval: 15s

  # Attach labels to all metrics
  external_labels:
    network: 'hegemon-testnet'

# Alerting rules
rule_files:
  # - "alerts/*.yml"

scrape_configs:
  # Hegemon Node Metrics
  - job_name: 'hegemon-nodes'
    static_configs:
      - targets:
          - boot1:9615
          - boot2:9615
          - boot3:9615
        labels:
          network: 'testnet'
    metrics_path: /metrics
    scrape_interval: 10s
    scrape_timeout: 5s
    relabel_configs:
      - source_labels: [__address__]
        regex: '(.+):9615'
        target_label: 'node'
        replacement: '${1}'

  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Optional: Host metrics via node_exporter
  # - job_name: 'node'
  #   static_configs:
  #     - targets:
  #         - node-exporter:9100

# Alertmanager configuration (optional)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#             - alertmanager:9093
